<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{user/layout/default}">
<head>
	<link rel="stylesheet" th:href="@{/assets/css/game/gamelist.css}" />
</head>
<th:block layout:fragment="contents-body">
	<main>
        <div class="main">
            <div class="main-contents">
                <div class="main_div">
			        <div class="category-menu">
			            <ul>
			            	<th:block th:each="l : ${platformList}">
			            			<li class="gamelist-cate" th:classappend="${l.platformCode == currentPlatformCode} ? 'active'"><a th:href="@{/game/platform(platformCode=${l.platformCode})}" th:text="${l.platformName}"></a></li>
			            	</th:block>
			            	
			            	
			            	<!-- <li class="gamelist-cate"><a th:href="@{/game/steam}">스팀</a></li>
			                <li class="gamelist-cate"><a th:href="@{/game/epic}">에픽게임즈</a></li>
			                <li class="gamelist-cate"><a th:href="@{/game/nintendo}">닌텐도</a></li>
			                <li class="gamelist-cate"><a th:href="@{/game/riot}">라이엇게임즈</a></li> -->
			            </ul>
			        </div>
			        <div class="category-menu">
			        	<ul>
			        		<li class="gamelist-cateA active"><a href="#">A~Z</a></li>
			        		<li class="gamelist-cateA"><a href="#">ㄱ~ㅎ</a></li>
			        		<li class="gamelist-cateA"><a href="#">기타</a></li>
			        	</ul>
			        </div>
			        <div class="search">
			            <input type="text" class="item-search">
			            <button type="button" class="search-button"><i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i></button>
			        </div>
			        <div class="card-body">
			        	<div class="row gx-3 row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 row-cols-xxl-5">
					       <th:block th:each="l : ${userGameList}">
						        <div class="col">
						        	<div class="game-info">
						                <img src="https://shared.cloudflare.steamstatic.com/store_item_assets/steam/apps/1812450/9edcb48a97b6073fc7e74dbec5d2fbb77ec6f566/capsule_616x353.jpg?t=1732789392">
						                <p class="game-name" th:text="${l.gameName}"></p>
						                <p class="game-price" th:text="${l.price}"></p>
						                <p class="game-platform" th:text="${l.platformName}"></p>
						            </div>
						        </div>
					        </th:block>
			        	</div>
			        </div>
			        <div class="pagination-area mt-15 mb-50">
			            <nav>
			                <ul class="pagination justify-content-center">
			                    <li class="page-item">
			                        <a class="page-link" th:href="@{/game/gameList}">
			                        	<i class="material-icons md-first_page"></i>
			                        </a>
			                    </li>
			                    <li class="page-item" th:classappend="${currentPage < 2} ? 'disabled'">
			                        <a class="page-link"
			                           th:href="@{/game/gameList(currentPage=${currentPage - 1})}">
			                        	<i class="material-icons md-chevron_left"></i>
			                        </a>
			                    </li>
			                    <th:block th:each="num : ${#numbers.sequence(startPageNum, endPageNum)}">
				                    <li class="page-item" th:classappend="${num == currentPage} ? 'active'">
				                    	<a class="page-link" th:href="@{/game/gameList(currentPage=${num})}" 
				                    	   th:text="${num}">
				                    	</a>
				                    </li>
			                    </th:block>
			                    <li class="page-item" th:classappend="${currentPage eq lastPage} ? 'disabled'">
			                        <a class="page-link"
			                           th:href="@{/game/gameList(currentPage=${currentPage + 1})}">
			                        	<i class="material-icons md-chevron_right"></i>
			                        </a>
			                    </li>
			                    <li class="page-item">
			                        <a class="page-link" th:href="@{/game/gameList(currentPage=${lastPage})}">
			                        	<i class="material-icons md-last_page"></i>
			                        </a>
			                    </li>
			                </ul>
			            </nav>
			        </div>
			    </div>
            </div>
        </div>
    </main>
</th:block>
<!--/* 사용자 추가 js file */-->
<th:block layout:fragment="customJsResource">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script th:src="@{/assets/js/home/homeJs.js}"></script>
</th:block>
<!--/* 사용자 추가 js script */-->
<th:block layout:fragment="customJs">
	<script th:inline="javascript">
		const gameList = $.ajax({
			url : 'https://api.steampowered.com/ISteamApps/GetAppList/v2/?language=korean',
			method : 'get',
			data : {
				key : '8746E8E06D0DE1AAC1DB32738C9D3556',
				format : 'json'
			},
			dataType : 'JSON'
		});
		gameList.done(function(data) {
			const gameListData = data.applist.apps;
			console.log(gameListData);
		});
		gameList.fail((jqXHR, textStatus, error) => {
			console.log(`${jqXHR}, ${textStatus}, ${error}`);
		});
		
		$('')
		
	</script>
</th:block>
</html>